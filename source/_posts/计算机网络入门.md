title: 计算机网络入门
author: Wtli
tags: []
categories: []
date: 2020-08-17 17:15:00
---
本文主要对网络相关的概念进行学习记录。
- REST
- RPC
- HTTP
- gRPC
- socket
- servlet
- socket
- soap


<!-- more -->

### 网络模型

首先是OSI(Open System Interconnection)七层模型与TCP/IP五层模型对比

![upload successful](/images/pasted-38.png)

**每层模型功能介绍：**
- **应用层**  
应用层是网络可向最终用户提供应用服务的唯一窗口，其目的是支持用户联网的应用的要求。由于用户的要求不同，应用层含有支持不同应用的多种应用实体，提供多种应用服务。  
**例如**  
电子邮件（MHS）、文件传输(FTAM)、虚拟终端(VT)、电子数据交换(EDI)等。  
**主要协议**  
FTP(21端口)，SMTP(25端口)，DNS，HTTP（80端口）
- **表示层**  
表示层的作用之一是为异种机通信提供一种公共语言，以便能进行互操作。这种类型的服务之所以需要，是因为不同的计算机体系结构使用的数据表示法不同。  
**例如**  
IBM主机使用EBCDIC编码，而大部分PC机使用的是ASCII码。在这种情况下，便需要表示层来完成这种转换。  
**功能**  
1.网络的安全和保密管理；  
2.文本的压缩与打包；   
3.虚拟终端协议(VTP)。  
4.语法转换：将抽象语法转换成传送语法，并在对方实现相反的转换（即将传送语法转换成抽象语法）。涉及的内容有代码转换、字符转换、数据格式的修改，以及对数据结构操作的适应、**数据压缩**、**加密**等。   
5.语法协商：根据应用层的要求协商选用合适的上下文，即确定传送语法并传送。  
6.连接管理：包括利用会话层服务建立表示连接，管理在这个连接之上的数据运输和同步控制（利用会话层相应的服务），以及正常地或异常地终止这个连接。
- **会话层**  
会话层提供的服务可使应用建立和维持会话，并能使会话获得同步。会话层使用校验点可使通信会话在通信失效时从校验点继续恢复通信，即对信息的交互实现控制。这种能力对于传送大的文件极为重要。  
**功能**  
1.建立会话：A、B两台网络设备之间要通信，要建立一条会话供他们使用，在建立会话的过程中也会有身份验证，权限鉴定等环节；  
2.保持会话：通信会话建立后，通信双方开始传递数据，当数据传递完成后，OSI会话层不一定会立刻将两者这条通信会话断开，它会根据应用程序和应用层的设置对该会话进行维护，在会话维持期间两者可以随时使用这条会话传输局；  
3.断开会话：当应用程序或应用层规定的超时时间到期后，OSI会话层才会释放这条会话。或者A、B重启、关机、手动执行断开连接的操作时，OSI会话层也会将A、B之间的会话断开。
- **传输层**  
传输层中最为常见的两个协议分别是传输控制协议TCP（Transmission Control Protocol）和用户数据报协议UDP（User Datagram Protocol）  
**功能**  
传输层提供逻辑连接的建立、传输层寻址、数据传输、传输连接释放、流量控制、拥塞控制、多路复用和解复用、崩溃恢复等服务。
- **网络层**


### REST && RPC
![dR9wTA.jpg](https://s1.ax1x.com/2020/08/26/dR9wTA.jpg)
#### REST
REST(REpresentational State Transfer)直接翻译：表现层状态转移。  
**
REST描述的是在网络中client和server的一种交互形式；  
REST本身不实用，实用的是如何设计 RESTful API（REST风格的网络接口）；
**
![upload successful](/images/pasted-39.png)
REST代表表现层状态转移(representational state transfer)。REST用来描述客户端通过某种形式获取服务器的数据，这些数据资源的格式通常是JSON或XML。**一种简单的理解就是：在设计API时，使用路径定位资源，方法定义操作，通过Content-Type和Accept来协商资源的类型。**  
REST也有一些限制:
- REST是无状态的，请求之间没有持久的会话信息
- 响应需要声明成可缓存的
- REST关注一致性，如果使用HTTP，需要尽可能使用HTTP的特性，而不是去发明新的公约
- 基于REST构建的API就是Restful风格。

#### RPC
RPC(Remote Procedure Call),远程过程调用。调用过程如下图，
![upload successful](/images/pasted-40.png)

RPC框架包含4个核心的组件，分别是Client ,Server,Client Stub以及Server Stub。

- 客户端（Client），服务的调用方。
- 服务端（Server），真正的服务提供者。
- 客户端Stub，存放服务端的地址消息，再将客户端的请求参数打包成网络消息，然后通过网络远程发送给服务方。
- 服务端Stub，接收客户端发送过来的消息，将消息解包，并调用本地的方法



### gRPC和Http Api
gRPC是以RPC为基础实现的。


Http Api是以Rest为基础实现的。


### socket && Http
我们在传输数据时，可以只使用（传输层）TCP/IP协议，但是那样的话，如果没有应用层，便无法识别数据内容，如果想要使传输的数据有意义，则必须使用到应用层协议，应用层协议有很多，比如HTTP、FTP、TELNET等，也可以自己定义应用层协议。WEB使用HTTP协议作应用层协议，以封装HTTP文本信息，然后使用TCP/IP做传输层协议将它发到网络上。
- Socket是一个针对TCP和UDP编程的接口，你可以借助它建立TCP连接等等。而TCP和UDP协议属于传输层 。而http是个应用层的协议，它实际上也建立在TCP协议之上(HTTP是轿车，提供了封装或者显示数据的具体形式；Socket是发动机，提供了网络通信的能力)。
- Socket是对TCP/IP协议的封装，Socket本身并不是协议，而是一个调用接口（API），通过Socket，我们才能使用TCP/IP协议。Socket的出现只是使得程序员更方便地使用TCP/IP协议栈而已，是对TCP/IP协议的抽象，从而形成了我们知道的一些最基本的函数接口。

### Servlet

### WebSocket
**websocket 目的：即时通讯，替代轮询**
```
WebSocket protocol 是HTML5一种新的协议。它实现了浏览器与服务器全双工通信(full-duplex)。
```
原理:  
WebSocket同HTTP一样也是应用层的协议，但是它是一种双向通信协议，是建立在TCP之上的。

**连接过程 —— 握手过程**
1. 浏览器、服务器建立TCP连接，三次握手。这是通信的基础，传输控制层，若失败后续都不执行。
2. TCP连接成功后，浏览器通过HTTP协议向服务器传送WebSocket支持的版本号等信息。（开始前的HTTP握手）
3. 服务器收到客户端的握手请求后，同样采用HTTP协议回馈数据。
4. 当收到了连接成功的消息后，通过TCP通道进行传输通信。